{% extends "base.html" %}

{% block title %}Admin â€“ Packages | winget REST Repository{% endblock %}

{% block content %}
<section>
  <h2>
    Packages
    <button onclick="openNewPackageModal()" class="button-add" title="Add new package">+</button>
  </h2>
  <p>All indexed packages. Click a row to view and manage versions.</p>

  <table class="table">
    <thead>
      <tr>
        <th>Identifier</th>
        <th>Name</th>
        <th>Latest version</th>
      </tr>
    </thead>
    <tbody>
      {% for pkg in packages %}
      <tr onclick="window.location.href='/admin/packages/{{ pkg.id }}'">
        <td><code>{{ pkg.id }}</code></td>
        <td>{{ pkg.name }}</td>
        <td>{{ pkg.latest_version or "-" }}</td>
      </tr>
      {% else %}
      <tr>
        <td colspan="3">No packages found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>

{% include "modal.html" %}

<script>
function openNewPackageModal() {
  openModal(
    'New Package',
    '/admin/packages/new/fragment',
    '/admin/packages/new',
    'reload'
  );
}
</script>
{% endblock %}


